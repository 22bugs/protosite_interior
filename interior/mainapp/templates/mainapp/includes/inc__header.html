{% load static %}

<header class="header">
    <a href="{% url 'main:index' %}">
        <img src="{% static 'img/interior_logo.png' %}" alt="Interior" height="22px">
    </a>

    <nav class="header-nav">
        {% for page in navigation %}
            {% with page.app|add:':'|add:page.href as url %}
                <a href="{% url url %}" class="header-nav-page" 
                        {% if request.resolver_match.url_name == page.href or page.href in request.path %}
                            activ='true'
                        {% else %}
                            activ='false'
                        {% endif %}>
                    {{ page.name }}
                </a>
            {% endwith %}
        {% endfor %}

        {% if user.is_authenticated %}
            <a href="{% url 'auth:logout' %}" class="header-nav-page">logout</a>
        {% else %}
            <a href="{% url 'auth:login' %}" class="header-nav-page">login</a>
            <a href="{% url 'auth:register' %}" class="header-nav-page">register</a>
        {% endif %}

        <div class="header-nav-appblock">
            {% if user.is_authenticated %}
                <a href="{% url 'auth:edit' %}" class="header-nav-appblock-app">
                    <img src="/media/{{ avatar }}" alt="" class="button-pic">
                </a>
            {% endif %}

            <a href="{% url 'basket:basket' %}" class="header-nav-appblock-app">
                <svg><use xlink:href="#svg_basket">
                <svg xmlns='http://www.w3.org/2000/svg' style='display: none;'><symbol id='svg_basket' viewBox='0 0 511.343 511.343'><path d='m490.334 106.668h-399.808l-5.943-66.207c-.972-10.827-10.046-19.123-20.916-19.123h-42.667c-11.598 0-21 9.402-21 21s9.402 21 21 21h23.468c12.825 142.882-20.321-226.415 24.153 269.089 1.714 19.394 12.193 40.439 30.245 54.739-32.547 41.564-2.809 102.839 50.134 102.839 43.942 0 74.935-43.826 59.866-85.334h114.936c-15.05 41.455 15.876 85.334 59.866 85.334 35.106 0 63.667-28.561 63.667-63.667s-28.561-63.667-63.667-63.667h-234.526c-15.952 0-29.853-9.624-35.853-23.646l335.608-19.724c9.162-.538 16.914-6.966 19.141-15.87l42.67-170.67c3.308-13.234-6.71-26.093-20.374-26.093zm-341.334 341.337c-11.946 0-21.666-9.72-21.666-21.667s9.72-21.667 21.666-21.667c11.947 0 21.667 9.72 21.667 21.667s-9.72 21.667-21.667 21.667zm234.667 0c-11.947 0-21.667-9.72-21.667-21.667s9.72-21.667 21.667-21.667 21.667 9.72 21.667 21.667-9.72 21.667-21.667 21.667zm47.366-169.726-323.397 19.005-13.34-148.617h369.142z'/></symbol></svg>    
                
                {% if basket %}
                    <div id="bascount">
                        {{ basket.0.total_quantity }}
                    </div>
                {% endif %}
            </a>

            <a href="#" class="header-nav-appblock-app">
                <svg><use xlink:href="#svg_loupe">
                <svg xmlns='http://www.w3.org/2000/svg' style='display: none;'><symbol id='svg_loupe' viewBox='0 0 384 384'><path d='m124.320312 286.65625c.734376.097656 1.464844.144531 2.175782.144531 7.871094 0 14.742187-5.824219 15.832031-13.839843 1.191406-8.761719-4.9375-16.824219-13.695313-18.007813-55.097656-7.488281-96.632812-55.191406-96.632812-110.953125 0-61.761719 50.238281-112 112-112s112 50.238281 112 112c0 45.535156-27.144531 86.144531-69.136719 103.449219-8.167969 3.367187-12.0625 12.71875-8.703125 20.886719 3.367188 8.167968 12.726563 12.054687 20.886719 8.695312 12.761719-5.253906 24.410156-12.238281 34.832031-20.527344l122.800782 122.808594c3.136718 3.128906 7.222656 4.6875 11.320312 4.6875s8.183594-1.558594 11.3125-4.6875c6.246094-6.25 6.246094-16.375 0-22.625l-122.761719-122.765625c19.945313-24.945313 31.449219-56.378906 31.449219-89.921875 0-79.398438-64.601562-144-144-144s-144 64.601562-144 144c0 71.695312 53.449219 133.023438 124.320312 142.65625zm0 0'/></symbol></svg>
            </a>
        </div>
    </nav>
</header>
